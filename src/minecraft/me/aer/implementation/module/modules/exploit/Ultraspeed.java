package me.aer.implementation.module.modules.exploit;

import com.darkmagician6.eventapi.EventTarget;
import me.aer.config.valuesystem.BooleanValue;
import me.aer.config.valuesystem.NumberValue;
import me.aer.implementation.module.base.Category;
import me.aer.implementation.module.base.Module;
import me.aer.implementation.utils.player.PlayerUtil;
import me.aer.injection.events.world.EventPreTick;

public class Ultraspeed extends Module {

    private NumberValue<Integer> speed = new NumberValue<>("Speed", "How fast, in blocks/second", 5, 0, 20, true);
    private BooleanValue omni = new BooleanValue("OmniDirectional", "Whether you should be boosted in all directions or just forwards", true);

    public Ultraspeed() {
        super("Ultraspeed", Category.EXPLOIT, "Allows you to travel at high speed!");
    }

    @EventTarget
    public void onTick(EventPreTick event) {
        if (minecraft.world != null && minecraft.player != null) {
            try {

                int v = 0;

                if (omni.getObject() && minecraft.player.movementInput.jump) {
                    v = speed.getValue() / 2;
                } else if (omni.getObject() && minecraft.player.movementInput.sneak) {
                    v = -speed.getValue() / 2;
                }

                if (minecraft.player.movementInput.forwardKeyDown) {
                    clipUtil.Clip(speed.getObject(), v, false, true, PlayerUtil.direction(minecraft.player));
                } else if (minecraft.player.movementInput.backKeyDown && omni.getObject()) {
                    clipUtil.Clip(speed.getObject(), v, false, true, PlayerUtil.directionBackwards(minecraft.player));
                } else if (minecraft.player.movementInput.leftKeyDown && omni.getObject()) {
                    clipUtil.Clip(speed.getObject(), v, false, true, PlayerUtil.directionLeft(minecraft.player));
                } else if (minecraft.player.movementInput.rightKeyDown && omni.getObject()) {
                    clipUtil.Clip(speed.getObject(), v, false, true, PlayerUtil.directionRight(minecraft.player));
                } else if (omni.getObject()) {
                    clipUtil.Clip(0, v, false, true);
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }


}
